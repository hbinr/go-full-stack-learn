# 通用命令
在正式介绍 5 种数据结构之前，了解⼀下 Redis 的⼀些全局命令、数据
结构和内部编码、单线程命令处理机制是⼗分有必要的，它们能为后⾯内容
的学习打下⼀个好的基础，主要体现在两个⽅⾯：第⼀、Redis 的命令有上
百个，如果纯靠死记硬背⽐较困难，但是如果理解 Redis 的⼀些机制，会发
现这些命令有很强的通⽤性。第⼆、Redis 不是万⾦油，有些数据结构和命
令必须在特定场景下使⽤，⼀旦使⽤不当可能对 Redis 本⾝或者应⽤本⾝造
成致命伤害。

Redis 有 5 种数据结构，它们是键值对中的值，对于键来说有⼀些通⽤
的命令。

以下6种命令都为全局命令
## 一.keys
根据匹配模式，返回匹配成功的key

### 1.keys *   
遍历所有的key
```
127.0.0.1:6379> set hello world
OK
127.0.0.1:6379> set go good
OK
127.0.0.1:6379> set 1 12
OK
127.0.0.1:6379> KEYS *
1) "1"
2) "go"
3) "hello"

```
### 2.keys [pattern] 
找出匹配 pattern 的key，pattern就是正则表达式。
```
127.0.0.1:6379> KEYS g?  # 匹配g开头，且key长度为2的key
1) "go"
```
注意：
keys命令一般不在生产环境中使用，因为：
- keys命令是一个比较“重的”命令，全量扫描，获取 Redis 内置的键总数变量，复杂度为O(n)的命令。

- 生产环境的key都比较多，如果全部扫描一遍的话，速度会很慢。

除非是打算将长期不用的key扫描出来，进行清理，提高内存的使用率，否则其他情况下不推荐使用该命令

### 3.keys * 怎么用？
1. 热备从节点
2. `scan`命令

## 二.dbsize
`dbsize` 命令会返回当前数据库中键的总数。

dbsize 命令在计算键总数时不会遍历所有键，⽽是直接获取 Redis 内置
的键总数变量，所以 dbsize 命令的时间复杂度是 O（1）
实例：
```
127.0.0.1:6379> DBSIZE
(integer) 3
```
可以在生产环境使用
## 三.exits
`exidts key` 检查key是否存在，如果键存在则返回 1，不存在则返回 0：

```
127.0.0.1:6379> EXISTS go
(integer) 1

127.0.0.1:6379> EXISTS goooo
(integer) 0
```
## 四.del
`del` 是⼀个通⽤命令，⽆论值是什么数据结构类型，del 命令都可以将
其删除
```
127.0.0.1:6379> del a
(integer) 1
```
同时 del 命令可以⽀持删除多个键：
```
127.0.0.1:6379> del a b c
(integer) 3
```
## 五.expire
`expire key seconds`

Redis ⽀持对键添加过期时间，当超过过期时间后，会⾃动删除键，例
如为键 hello 设置了 10 秒过期时间：
```
127.0.0.1:6379> expire hello 10
(integer) 1
```

## 六.type
`type key`
例如键 hello 是字符串类型，返回结果为 string
```
127.0.0.1:6379> type hello
string
```
如果键不存在，则返回 none：
```
127.0.0.1:6379> type helllooooo   
none
```